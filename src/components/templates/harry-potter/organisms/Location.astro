---
const { invitation, profile } = Astro.props;
const customData = invitation?.custom_data || {};
const eventDateLabel = customData.event_date_label || "Sábado 7 de Mayo";
const doorTime = customData.ceremony?.time || "18:00 hs";
const venueName = customData.location?.name || "El Gran Comedor";
const venueAddress = customData.location?.address || "Calle Cualquiera 123";
---

<section class="hp-location-section">
    <div class="hp-location-card">
        <!-- Esquinas decorativas -->
        <div class="hp-corner hp-corner-tl"></div>
        <div class="hp-corner hp-corner-tr"></div>
        <div class="hp-corner hp-corner-bl"></div>
        <div class="hp-corner hp-corner-br"></div>

        <div class="hp-location-content">
            <div class="hp-location-text">
                <h3 class="hp-location-date">Sábado 7 de Mayo</h3>
                <div class="hp-location-details">
                    <p class="hp-location-detail mb">
                        <i class="ph-thin ph-hourglass-high hp-location-icon"
                        ></i>
                        Apertura de Puertas: 18:00 hs
                    </p>
                    <p class="hp-location-detail">
                        <i class="ph-thin ph-map-pin hp-location-icon"></i>
                        El Gran Comedor (Calle Cualquiera 123)
                    </p>
                </div>
            </div>

            <!-- Ilustración Búho Mensajero -->
            <div class="hp-owl-container">
                <svg
                    width="120"
                    height="120"
                    viewBox="0 0 200 200"
                    fill="none"
                    class="hp-owl"
                >
                    <!-- Contorno principal (Cuerpo y alas plegadas) -->
                    <path
                        d="M100 30 C 160 30, 180 80, 170 140 C 160 180, 120 190, 100 190 C 80 190, 40 180, 30 140 C 20 80, 40 30, 100 30 Z"
                        class="hp-owl-body"
                        stroke-width="5"></path>

                    <!-- Cabeza y Cuernos/Orejas -->
                    <path
                        d="M 65 35 L 45 15 Q 100 35 155 15 L 135 35"
                        stroke="var(--color-ink)"
                        stroke-width="5"
                        stroke-linejoin="round"></path>

                    <!-- Detalles de la cara (Máscara estilo lechuza/búho) -->
                    <path
                        d="M 100 55 C 70 35, 45 60, 65 85 C 75 110, 95 105, 100 95 C 105 105, 125 110, 135 85 C 155 60, 130 35, 100 55 Z"
                        stroke="var(--color-ink)"
                        stroke-width="4"
                        fill="var(--color-bg)"></path>

                    <!-- Ojos -->
                    <path
                        d="M 75 65 Q 85 60 95 65 Q 85 75 75 65 Z"
                        fill="var(--color-ink-red)"></path>
                    <path
                        d="M 125 65 Q 115 60 105 65 Q 115 75 125 65 Z"
                        fill="var(--color-ink-red)"></path>
                    <circle cx="85" cy="66" r="3" fill="var(--color-ink)"
                    ></circle>
                    <circle cx="115" cy="66" r="3" fill="var(--color-ink)"
                    ></circle>

                    <!-- Pico -->
                    <path d="M 100 75 L 94 95 L 106 95 Z" class="hp-owl-beak"
                    ></path>

                    <!-- Patrón de Plumas en el pecho -->
                    <path
                        d="M 60 105 Q 80 120 100 105 Q 120 120 140 105"
                        stroke="var(--color-ink)"
                        stroke-width="3"
                        stroke-linecap="round"></path>
                    <path
                        d="M 70 120 Q 85 135 100 120 Q 115 135 130 120"
                        stroke="var(--color-ink)"
                        stroke-width="3"
                        stroke-linecap="round"></path>

                    <!-- Carta mágica -->
                    <g
                        transform="translate(100, 145) rotate(-10) translate(-100, -145)"
                    >
                        <rect
                            x="65"
                            y="130"
                            width="70"
                            height="45"
                            class="hp-owl-body"
                            stroke-width="5"
                            rx="2"></rect>
                        <path
                            d="M 65 130 L 100 155 L 135 130"
                            stroke="var(--color-ink)"
                            stroke-width="5"
                            stroke-linejoin="round"></path>
                        <path
                            d="M 85 144 L 65 175"
                            stroke="var(--color-ink)"
                            stroke-width="3"></path>
                        <path
                            d="M 115 144 L 135 175"
                            stroke="var(--color-ink)"
                            stroke-width="3"></path>
                        <!-- Sello de cera -->
                        <circle cx="100" cy="155" r="9" class="hp-owl-eye"
                        ></circle>
                        <!-- Estrella en el sello -->
                        <path
                            d="M 98 150 L 102 155 L 97 155 L 101 160"
                            stroke="var(--color-bg)"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            fill="none"></path>
                    </g>

                    <!-- Patas sosteniendo la carta -->
                    <path
                        d="M 85 130 L 80 140 M 89 130 L 84 138"
                        stroke="var(--color-ink)"
                        stroke-width="4"
                        stroke-linecap="round"></path>
                    <path
                        d="M 115 130 L 120 140 M 111 130 L 116 138"
                        stroke="var(--color-ink)"
                        stroke-width="4"
                        stroke-linecap="round"></path>
                </svg>
            </div>
        </div>
    </div>
</section>

<style>
    .hp-location-section {
        padding: 3rem 1.5rem;
    }

    .hp-location-card {
        position: relative;
        border: 1px solid rgba(92, 64, 51, 0.4); /* inkLight with opacity */
        padding: 2rem;
        border-radius: 2px;
    }

    /* Esquinas */
    .hp-corner {
        position: absolute;
        width: 12px;
        height: 12px;
        border-color: var(--color-ink-red);
        border-style: solid;
    }

    .hp-corner-tl {
        top: 0;
        left: 0;
        border-width: 2px 0 0 2px;
    }

    .hp-corner-tr {
        top: 0;
        right: 0;
        border-width: 2px 2px 0 0;
    }

    .hp-corner-bl {
        bottom: 0;
        left: 0;
        border-width: 0 0 2px 2px;
    }

    .hp-corner-br {
        bottom: 0;
        right: 0;
        border-width: 0 2px 2px 0;
    }

    .hp-location-content {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        text-align: center;
    }

    .hp-location-date {
        font-family: var(--font-magic);
        font-size: 1.5rem; /* 24px */
        color: var(--color-ink-red);
        margin-bottom: 1rem;
        font-weight: 700;
    }

    @media (min-width: 768px) {
        .hp-location-date {
            font-size: 1.875rem; /* 30px */
        }
    }

    .hp-location-details {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
        color: var(--color-ink-light);
        font-weight: 600;
    }

    .hp-location-detail {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .hp-location-icon {
        font-size: 1.25rem;
    }

    /* Owl */
    .hp-owl-container {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
    }

    .hp-owl {
        stroke: var(--color-ink);
        stroke-width: 1.5;
        stroke-linecap: round;
        stroke-linejoin: round;
        transition: transform 0.5s ease;
    }

    .hp-owl-container:hover .hp-owl {
        transform: scale(1.05);
    }

    .hp-owl-eye {
        fill: var(--color-ink-red);
        stroke: none;
    }

    .hp-owl-beak {
        fill: var(--color-ink);
    }

    .hp-owl-feather {
        stroke: var(--color-ink-light);
    }
</style>
